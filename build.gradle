buildscript {
    repositories {
        mavenLocal()
        jcenter()
        maven {
            url 'https://oss.sonatype.org/content/groups/public'
        }
    }
    dependencies {
        classpath 'org.junit.platform:junit-platform-gradle-plugin:1.1.0-M1'
    }
}

plugins {
    id 'nebula.lint' version '8.3.1'
    id 'nebula.info' version '3.6.0'

    id "com.simonharrer.modernizer" version '1.5.0-1'
}

subprojects {

}

allprojects {
    apply plugin: 'java'
    apply plugin: 'checkstyle'

    sourceCompatibility = 1.8
    targetCompatibility = 1.8

    group = "org.jabref"
    version = "4.2-dev"

    repositories {
        mavenLocal()
        jcenter()
        maven {
            url 'https://oss.sonatype.org/content/groups/public'
        }
    }

    // linter for gradle - documentation: https://github.com/nebula-plugins/gradle-lint-plugin/wiki
    apply plugin: 'nebula.lint'
    gradleLint.rules = ['all-dependency']

    dependencies {
        checkstyle 'com.puppycrawl.tools:checkstyle:8.8'
    }

    // Code quality tasks
    checkstyle {
        // do not use other packages for checkstyle, excluding gen(erated) sources
        checkstyleMain.source = "src/main/java"
        toolVersion = '8.5'
    }

    checkstyleMain.shouldRunAfter test
    checkstyleTest.shouldRunAfter test

    modernizer {
        // We have more than 20 issues, which are not fixed yet. Nevertheless, we produce the modernizer output.
        // See https://github.com/andrewgaul/modernizer-maven-plugin for more information on modernizer
        failOnViolations = false
    }
}
